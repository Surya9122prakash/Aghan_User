<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Aghan Promoters" />
    <meta name="keyword" content="Aghan Promoters" />
    <meta name="author" content="Aghan Promoters" />
    <title>Activation History - Aghan Promoters</title>
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/Dashboard/logo.png" />
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="assets/vendors/css/vendors.min.css" />
    <link rel="stylesheet" type="text/css" href="assets/vendors/css/daterangepicker.min.css" />
    <link rel="stylesheet" type="text/css" href="assets/css/theme.min.css" />
    <style>
        body {
            background-color: #182c25;
        }

        .form-bg {
            background-color: #306844;

        }

        #daysLeftContainer {
            position: relative;
            display: inline-block;
            cursor: pointer;
            margin-left: 10px;
        }

        #daysLeftTooltip {
            /* ... existing tooltip styles ...*/
            display: none;
            /* Initially hidden */
        }

        #daysLeftContainer:hover #daysLeftTooltip {
            display: block;
            /* Show on hover */
            opacity: 1;
            /* Ensure opacity is 1 when displayed */
        }

        /* Styles for different status conditions */
        #daysLeft.active {
            color: green;
        }

        #daysLeft.expired {
            color: red;
        }

        #daysLeft.no-rebirth {
            color: gray;
        }

        #daysLeft.error {
            color: orange;
        }
    </style>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined">
</head>

<body>
    <nav class="nxl-navigation">
        <div class="navbar-wrapper">
            <div class="m-header">
                <a href="user.html" class="b-brand">
                    <img src="assets/images/Dashboard/aghan-logo-english.png" width="100" alt="Aghan Logo"
                        class="logo logo-lg" />
                    <img src="assets/images/Dashboard/logo.png" alt="Aghan logo" class="logo logo-sm" />
                </a>
            </div>
            <div class="navbar-content">
                <ul class="nxl-navbar">
                    <li class="nxl-item">
                        <a href="user.html" class="nxl-link">
                            <span class="nxl-micon"><i class="feather-grid"></i></span>
                            <span class="nxl-mtext"><b>Dashboard</b></span>
                        </a>
                    </li>

                    <li class="nxl-item">
                        <a href="./assets/images/Brochure PDF/aghan brochure pdf.pdf" class="nxl-link"
                            download="aghan brochure pdf.pdf">
                            <span class="nxl-micon"><i class="feather-download"></i></span>
                            <span class="nxl-mtext"><b>Download Brochure</b></span>
                        </a>
                    </li>

                    <li class="nxl-item">
                        <a href="user register.html" class="nxl-link">
                            <span class="nxl-micon"><i class="feather-user-plus"></i></span>
                            <span class="nxl-mtext"><b>Register</b></span>
                        </a>
                    </li>

                    <li class="nxl-item nxl-hasmenu">
                        <a href="javascript:void(0);" class="nxl-link">
                            <span class="nxl-micon"><i class="fas fa-user-check"></i></span>
                            <span class="nxl-mtext"><b>Activation</b></span><span class="nxl-arrow"><i
                                    class="feather-chevron-right"></i></span>
                        </a>
                        <ul class="nxl-submenu">
                            <li class="nxl-item"><a class="nxl-link" href="add funds.html">Add Funds</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="topup.html">User Topup</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="history.html">History</a></li>
                        </ul>
                    </li>


                    <li class="nxl-item nxl-hasmenu">
                        <a href="javascript:void(0);" class="nxl-link">
                            <span class="nxl-micon"> <span class="material-symbols-outlined">account_tree</span></span>
                            <span class="nxl-mtext">Tree View</span><span class="nxl-arrow"><i
                                    class="feather-chevron-right"></i></span>
                        </a>
                        <ul class="nxl-submenu">
                            <li class="nxl-item"><a class="nxl-link" href="my direct.html">My Direct</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="my team.html">My Team</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="Tree View.html">Tree View</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="silver board.html">Silver Board</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="gold board.html">Gold Board</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="diamond board.html">Diamond Board</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="platinum board.html">Platinum Board</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="king board.html">King Board</a></li>
                        </ul>
                    </li>
                    <li class="nxl-item nxl-hasmenu">
                        <a href="javascript:void(0);" class="nxl-link">
                            <span class="nxl-micon"><i class="fas fa-exchange-alt"></i></span>
                            <span class="nxl-mtext">Transactions</span><span class="nxl-arrow"><i
                                    class="feather-chevron-right"></i></span>
                        </a>
                        <ul class="nxl-submenu">
                            <li class="nxl-item"><a class="nxl-link" href="fund transfer.html">Fund Transfer</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="internal transfer.html">Internal Transfer</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="AW to EW transfer.html">AW to EW Transfer</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="EW to UW transfer.html">EW to UW Transfer</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="accounts.html">Accounts</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="transaction.html">All Transactions</a></li>
                        </ul>
                    </li>
                    <li class="nxl-item nxl-hasmenu">
                        <a href="javascript:void(0);" class="nxl-link">
                            <span class="nxl-micon"><i class="fas fa-wallet"></i></span>
                            <span class="nxl-mtext">Income</span><span class="nxl-arrow"><i
                                    class="feather-chevron-right"></i></span>
                        </a>
                        <ul class="nxl-submenu">
                            <li class="nxl-item"><a class="nxl-link" href="sponser income.html">Sponser Income</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="silver board income.html">Silver Board
                                    Income</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="gold board income.html">Gold Board Income</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="diamond board income.html">Diamond Board
                                    Income</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="platinum board income.html">Platinum Board
                                    Income</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="king board income.html">King Board Income</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="payout.html">Payout Request</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="payout history.html">Payout Request History</a>
                            </li>
                        </ul>
                    </li>

                    <li class="nxl-item">
                        <a href="withdraw.html" class="nxl-link">
                            <span class="nxl-micon"><i class="fas fa-money-bill-wave"></i></span>
                            <span class="nxl-mtext"><b>Withdraw</b></span>
                        </a>
                    </li>

                    <li class="nxl-item">
                        <a href="refer friends.html" class="nxl-link">
                            <span class="nxl-micon"><i class="feather-user-plus"></i></span>
                            <span class="nxl-mtext"><b>Invite Friends</b></span>
                        </a>
                    </li>

                    <li class="nxl-item nxl-hasmenu">
                        <a href="javascript:void(0);" class="nxl-link">
                            <span class="nxl-micon"><i class="fas fa-user-cog"></i></span>
                            <span class="nxl-mtext"><b>My Profile</b></span><span class="nxl-arrow"><i
                                    class="feather-chevron-right"></i></span>
                        </a>
                        <ul class="nxl-submenu">
                            <li class="nxl-item"><a class="nxl-link" href="personal.html">Personal</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="change password.html">Change Password</a>
                            </li>
                            <li class="nxl-item"><a class="nxl-link" href="bank update.html">Bank Update</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="upi update.html">UPI Update</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="profile image.html">Profile Image</a></li>
                        </ul>
                    </li>

                    <li class="nxl-item nxl-hasmenu">
                        <a href="javascript:void(0);" class="nxl-link">
                            <span class="nxl-micon"><i class="fas fa-life-ring"></i></span>
                            <span class="nxl-mtext">Help</span><span class="nxl-arrow"><i
                                    class="feather-chevron-right"></i></span>
                        </a>
                        <ul class="nxl-submenu">
                            <li class="nxl-item"><a class="nxl-link" href="create tickets.html">Create Tickets</a></li>
                            <li class="nxl-item"><a class="nxl-link" href="view tickets.html">View Tickets</a></li>
                        </ul>
                    </li>

                    <li class="nxl-item">
                        <a href="index.html" class="nxl-link">
                            <span class="nxl-micon"><i class="fas fa-sign-out-alt"></i></span>
                            <span class="nxl-mtext"><b>Sign Out</b></span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <header class="nxl-header">
        <div class="header-wrapper">
            <div class="header-left d-flex align-items-center gap-4">
                <a href="javascript:void(0);" class="nxl-head-mobile-toggler" id="mobile-collapse">
                    <div class="hamburger hamburger--arrowturn">
                        <div class="hamburger-box">
                            <div class="hamburger-inner"></div>
                        </div>
                    </div>
                </a>
                <div class="nxl-navigation-toggle">
                    <a href="javascript:void(0);" id="menu-mini-button">
                        <i class="feather-align-left"></i>
                    </a>
                    <a href="javascript:void(0);" id="menu-expend-button" style="display: none">
                        <i class="feather-arrow-right"></i>
                    </a>
                </div>
            </div>
            <div class="header-right ms-auto">
                <div class="d-flex align-items-center">
                    <!-- Days left config -->
                    <div id="daysLeftContainer">
                        <i class="fas fa-clock"></i> <span id="daysLeft">Loading...</span>
                        <div id="daysLeftTooltip"></div> <!-- Tooltip container -->
                    </div>
                    <div class="dropdown nxl-h-item nxl-header-language d-none d-sm-flex">
                        <a href="javascript:void(0);" class="nxl-head-link me-0 nxl-language-link"
                            data-bs-toggle="dropdown" data-bs-auto-close="outside">
                            <img src="assets/vendors/img/flags/1x1/in.svg" alt="" class="img-fluid wd-20" />
                        </a>
                        <div class="dropdown-menu dropdown-menu-end nxl-h-dropdown nxl-language-dropdown">
                            <div class="dropdown-divider mt-0"></div>
                            <div class="language-items-wrapper">
                                <div class="select-language px-4 py-2 hstack justify-content-between gap-4">
                                    <div class="lh-lg">
                                        <h6 class="mb-0">Select Language</h6>
                                        <p class="fs-11 text-muted mb-0">12 languages avaiable!</p>
                                    </div>
                                    <a href="javascript:void(0);" class="avatar-text avatar-md" data-bs-toggle="tooltip"
                                        title="Add Language">
                                        <i class="feather-plus"></i>
                                    </a>
                                </div>
                                <div class="dropdown-divider"></div>
                                <div class="row px-4 pt-3">
                                    <div class="col-sm-4 col-6 language_select">
                                        <a href="javascript:void(0);" class="d-flex align-items-center gap-2">
                                            <div class="avatar-image avatar-sm"><img
                                                    src="assets/vendors/img/flags/1x1/sa.svg" alt=""
                                                    class="img-fluid" /></div>
                                            <span>Arabic</span>
                                        </a>
                                    </div>
                                    <div class="col-sm-4 col-6 language_select">
                                        <a href="javascript:void(0);" class="d-flex align-items-center gap-2">
                                            <div class="avatar-image avatar-sm"><img
                                                    src="assets/vendors/img/flags/1x1/bd.svg" alt=""
                                                    class="img-fluid" /></div>
                                            <span>Bengali</span>
                                        </a>
                                    </div>
                                    <div class="col-sm-4 col-6 language_select">
                                        <a href="javascript:void(0);" class="d-flex align-items-center gap-2">
                                            <div class="avatar-image avatar-sm"><img
                                                    src="assets/vendors/img/flags/1x1/ch.svg" alt=""
                                                    class="img-fluid" /></div>
                                            <span>Chinese</span>
                                        </a>
                                    </div>
                                    <div class="col-sm-4 col-6 language_select">
                                        <a href="javascript:void(0);" class="d-flex align-items-center gap-2">
                                            <div class="avatar-image avatar-sm"><img
                                                    src="assets/vendors/img/flags/1x1/nl.svg" alt=""
                                                    class="img-fluid" /></div>
                                            <span>Dutch</span>
                                        </a>
                                    </div>
                                    <div class="col-sm-4 col-6 language_select active">
                                        <a href="javascript:void(0);" class="d-flex align-items-center gap-2">
                                            <div class="avatar-image avatar-sm"><img
                                                    src="assets/vendors/img/flags/1x1/us.svg" alt=""
                                                    class="img-fluid" /></div>
                                            <span>English</span>
                                        </a>
                                    </div>
                                    <div class="col-sm-4 col-6 language_select">
                                        <a href="javascript:void(0);" class="d-flex align-items-center gap-2">
                                            <div class="avatar-image avatar-sm"><img
                                                    src="assets/vendors/img/flags/1x1/fr.svg" alt=""
                                                    class="img-fluid" /></div>
                                            <span>French</span>
                                        </a>
                                    </div>
                                    <div class="col-sm-4 col-6 language_select">
                                        <a href="javascript:void(0);" class="d-flex align-items-center gap-2">
                                            <div class="avatar-image avatar-sm"><img
                                                    src="assets/vendors/img/flags/1x1/de.svg" alt=""
                                                    class="img-fluid" /></div>
                                            <span>German</span>
                                        </a>
                                    </div>
                                    <div class="col-sm-4 col-6 language_select">
                                        <a href="javascript:void(0);" class="d-flex align-items-center gap-2">
                                            <div class="avatar-image avatar-sm"><img
                                                    src="assets/vendors/img/flags/1x1/in.svg" alt=""
                                                    class="img-fluid" /></div>
                                            <span>Tamil</span>
                                        </a>
                                    </div>
                                    <div class="col-sm-4 col-6 language_select">
                                        <a href="javascript:void(0);" class="d-flex align-items-center gap-2">
                                            <div class="avatar-image avatar-sm"><img
                                                    src="assets/vendors/img/flags/1x1/ru.svg" alt=""
                                                    class="img-fluid" /></div>
                                            <span>Russian</span>
                                        </a>
                                    </div>
                                    <div class="col-sm-4 col-6 language_select">
                                        <a href="javascript:void(0);" class="d-flex align-items-center gap-2">
                                            <div class="avatar-image avatar-sm"><img
                                                    src="assets/vendors/img/flags/1x1/es.svg" alt=""
                                                    class="img-fluid" /></div>
                                            <span>Spanish</span>
                                        </a>
                                    </div>
                                    <div class="col-sm-4 col-6 language_select">
                                        <a href="javascript:void(0);" class="d-flex align-items-center gap-2">
                                            <div class="avatar-image avatar-sm"><img
                                                    src="assets/vendors/img/flags/1x1/tr.svg" alt=""
                                                    class="img-fluid" /></div>
                                            <span>Turkish</span>
                                        </a>
                                    </div>
                                    <div class="col-sm-4 col-6 language_select">
                                        <a href="javascript:void(0);" class="d-flex align-items-center gap-2">
                                            <div class="avatar-image avatar-sm"><img
                                                    src="assets/vendors/img/flags/1x1/pk.svg" alt=""
                                                    class="img-fluid" /></div>
                                            <span>Urdo</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="nxl-h-item d-none d-sm-flex">
                        <div class="full-screen-switcher">
                            <a href="javascript:void(0);" class="nxl-head-link me-0"
                                onclick="$('body').fullScreenHelper('toggle');">
                                <i class="feather-maximize maximize"></i>
                                <i class="feather-minimize minimize"></i>
                            </a>
                        </div>
                    </div>
                    <div class="nxl-h-item dark-light-theme">
                        <a href="javascript:void(0);" class="nxl-head-link me-0 dark-button">
                            <i class="feather-moon"></i>
                        </a>
                        <a href="javascript:void(0);" class="nxl-head-link me-0 light-button" style="display: none">
                            <i class="feather-sun"></i>
                        </a>
                    </div>
                    <div class="dropdown nxl-h-item">
                        <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button"
                            data-bs-auto-close="outside">
                            <img src="assets/images/Dashboard/logo.png" alt="user-image"
                                class="img-fluid user-avtar me-0" />
                        </a>
                        <div class="dropdown-menu dropdown-menu-end nxl-h-dropdown nxl-user-dropdown">
                            <div class="dropdown-header">
                                <div class="d-flex align-items-center">
                                    <img src="assets/images/Dashboard/logo.png" alt="user-image"
                                        class="img-fluid user-avtar" />
                                    <div>
                                        <h6 class="text-dark mb-0">Aghan <span
                                                class="badge bg-soft-success text-success ms-1"></span></h6>
                                        <span class="fs-12 fw-medium text-muted">infoaghan@gmail.com</span>
                                    </div>
                                </div>
                            </div>

                            <a href="javascript:void(0);" class="dropdown-item">
                                <i class="feather-settings"></i>
                                <span>Account Settings</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="index.html" class="dropdown-item">
                                <i class="feather-log-out"></i>
                                <span>Logout</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <main class="nxl-container">
        <div class="nxl-content">
            <div class="main-content">

                <div class="row">
                    <div class="col-sm-12 col-xl-12 d-flex justify-content-center align-items-center">
                        <div class="form-bg rounded h-100 p-4 w-100" style="max-width: 1400px;">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <div style="display: flex; align-items: center;">
                                    <img src="./assets/images/Icons/History.png" alt="Description"
                                        style="width: 70px; height: 75px; margin-right: 8px;">
                                    <h4 style="color: #fff; margin: 0;">Activation History</h4>
                                </div>
                            </div>

                            <p style="text-align: left;" class="text-light mb-4">You can view your own topup history</p>

                            <div class="scroll-container" id="historyContainer"
                                style="max-height: 400px; overflow-y: auto; padding-right: 10px;">


                            </div>

                            <div class="notransactioncard" id="noTransactionMessage">
                                <div class="card-content">
                                    <img src="./assets/images/Dashboard/no_transaction.png" alt="No transaction"
                                        class="icon" />
                                    <h3 class="text-danger">No Transaction here!</h3>
                                </div>
                            </div>

                            <style>
                                .scroll-container {
                                    max-height: 400px;
                                    overflow-y: auto;
                                    padding-right: 10px;
                                }

                                @media (max-width: 576px) {
                                    .card-body h6 {
                                        font-size: 12px;
                                    }

                                    .card-body small {
                                        font-size: 10px;
                                    }

                                    .card-body img {
                                        width: 30px;
                                        height: 30px;
                                    }

                                    .card {
                                        padding: 2px 6px;
                                    }

                                    .amount {
                                        font-size: 12px;
                                    }

                                    .card-body {
                                        flex-wrap: wrap;
                                    }

                                    .card-body div {
                                        max-width: 75%;
                                        word-wrap: break-word;
                                    }

                                    .amount {
                                        max-width: 20%;
                                        text-align: right;
                                    }
                                }

                                .notransactioncard {
                                    width: 100%;
                                    max-width: 600px;
                                    border: 2px dashed #bfbfbf;
                                    background-color: #f9f6f6;
                                    padding: 20px;
                                    text-align: center;
                                    margin: 20px auto;
                                    border-radius: 8px;
                                }

                                .card-content {
                                    display: flex;
                                    flex-direction: column;
                                    align-items: center;
                                }

                                .icon {
                                    width: 100px;
                                    height: auto;
                                    margin-bottom: 10px;
                                }
                            </style>


                        </div>
                    </div>
                </div>



            </div>
        </div>
    </main>
    <script src="assets/vendors/js/vendors.min.js"></script>
    <script src="assets/vendors/js/daterangepicker.min.js"></script>
    <script src="assets/vendors/js/apexcharts.min.js"></script>
    <script src="assets/vendors/js/circle-progress.min.js"></script>
    <script src="assets/js/common-init.min.js"></script>
    <script src="assets/js/dashboard-init.min.js"></script>
    <script src="assets/js/theme-customizer-init.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const historyContainer = document.getElementById('historyContainer');
            const noTransactionMessage = document.getElementById('noTransactionMessage');
            const token = sessionStorage.getItem('token1');

            if (!token) {
                console.error("User not logged in. Redirecting to login...");
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'You need to log in!',
                });
                window.location.href = 'index.html';
                return;
            }

            try {
                const response = await fetch('https://aghan-backend.onrender.com/topup-history', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    const history = data.history;
                    console.log(history);

                    if (history.length === 0) {
                        noTransactionMessage.style.display = 'block';
                        historyContainer.style.display = 'none';
                    } else {
                        noTransactionMessage.style.display = 'none';
                        historyContainer.style.display = 'block';
                        history.forEach(item => {
                            const historyElement = `
                                <div class="card mb-4" style="background-color:#182c25; border: 1px solid #ccc;">
                                    <div class="card-body d-flex align-items-center justify-content-between">
                                        <div>
                                            <h6 class="text-light"><b>ID: ${item.user_id}</b></h6>
                                            <small class="text-light">Package: ${item.package}</small> 
                                            <small class="text-light">Date: ${new Date(item.topup_date).toLocaleString()}</small> 
                                        </div>
                                        <div>
                                            <img src="./assets/images/Icons/topup gif.gif" alt="Topup Icon" style="width: 35px; height: 35px;">
                                        </div>
                                    </div>
                                </div>
                            `;
                            historyContainer.innerHTML += historyElement;
                        });
                    }
                } else {
                    console.error('Error fetching history:', response.status);
                    Swal.fire({
                        icon: 'error',
                        title: 'Oops...',
                        text: 'Failed to fetch history!',
                    });
                }
            } catch (error) {
                console.error('Error fetching history:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'A network error occurred!',
                });
            }

            const daysLeftContainer = document.getElementById('daysLeftContainer');
            const daysLeftSpan = document.getElementById('daysLeft');
            const daysLeftTooltip = document.getElementById('daysLeftTooltip');
            let intervalId;

            async function updateDaysLeft() {
                const token = sessionStorage.getItem('token1');

                if (!token) {
                    daysLeftSpan.textContent = "N/A";
                    daysLeftSpan.classList.add('no-rebirth');
                    daysLeftTooltip.textContent = "";
                    return;
                }

                try {
                    const response = await fetch('https://aghan-backend.onrender.com/rebirth-bonus-status', {
                        headers: { 'Authorization': `Bearer ${token}` }
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    daysLeftSpan.classList.remove('active', 'expired', 'no-rebirth', 'error');

                    if (data.status === 'active') {
                        const expiryDate = moment(data.expiryDate);
                        const now = moment();
                        const daysLeft = Math.max(0, expiryDate.diff(now, 'days'));

                        if (daysLeft > 0) {
                            daysLeftSpan.textContent = `${daysLeft} days`;
                            daysLeftTooltip.textContent = `Your rebirth bonus expires in ${daysLeft} days.`;
                            daysLeftSpan.classList.add('active');
                        } else {
                            clearInterval(intervalId);
                            daysLeftSpan.textContent = "Expired";
                            daysLeftTooltip.textContent = "Your rebirth bonus claim period has expired.";
                            daysLeftSpan.classList.add('expired'); // Add expired class
                        }
                    } else if (data.status === 'expired') {
                        daysLeftSpan.textContent = "Expired";
                        daysLeftTooltip.textContent = "Your rebirth bonus claim period has expired.";
                        daysLeftSpan.classList.add('expired');
                    } else if (data.status === 'no_rebirth') {
                        daysLeftSpan.textContent = "N/A";
                        daysLeftTooltip.textContent = "No active rebirth bonus found.";
                        daysLeftSpan.classList.add('no-rebirth');
                    }

                } catch (error) {
                    console.error('Error fetching rebirth bonus status:', error);
                    daysLeftSpan.textContent = "Error";
                    daysLeftSpan.classList.add('error');
                    daysLeftTooltip.textContent = "";
                }
            }

            updateDaysLeft(); // Initial fetch
            intervalId = setInterval(updateDaysLeft, 60 * 60 * 1000); // Update every hour

            // Tooltip event listeners (mouseenter/mouseleave)
            daysLeftContainer.addEventListener('mouseenter', () => {
                daysLeftTooltip.style.opacity = 1;
            });

            daysLeftContainer.addEventListener('mouseleave', () => {
                daysLeftTooltip.style.opacity = 0;
            });

            // Clean up interval on page unload or component unmount
            window.addEventListener('beforeunload', () => clearInterval(intervalId));
        });
    </script>
</body>

</html>